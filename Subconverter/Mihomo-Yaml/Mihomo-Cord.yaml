### Dateï¼š2025-08-23

### å…¨å±€é…ç½®
mixed-port: 7890
redir-port: 7892
allow-lan: true
mode: rule
log-level: info
ipv6: false
find-process-mode: strict
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome

external-controller: 127.0.0.1:9090
external-ui: Dashboard
#external-ui-url: "https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
external-ui-url: "https://github.com/Zephyruso/zashboard/releases/latest/download/dist-cdn-fonts.zip"
secret: ""

geodata-mode: true
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
#  mmdb: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb"
geo-auto-update: true
geo-update-interval: 360

profile:
  store-selected: true
  store-fake-ip: true

### DNSé…ç½®
dns:
  enable: true
  prefer-h3: true
  ipv6: false
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 1.1.1.1
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  # fake-ip-filter start
  fake-ip-filter:
    - +.+m2m
    - +.$injections.adguard.org
    - +.$local.adguard.org
    - +.+bogon
    - +.+lan
    - +.+local
    - +.+internal
    - +.+localdomain
    - +.home.arpa
    - dns.msftncsi.com
    - "*.srv.nintendo.net"
    - "*.stun.playstation.net"
    - xbox.*.microsoft.com
    - "*.xboxlive.com"
    - "*.turn.twilio.com"
    - "*.stun.twilio.com"
    - stun.syncthing.net
    - stun.*
    - "*.sslip.io"
    - "*.nip.io"
  # fake-ip-filter end
  nameserver:
    # - system
    - 223.5.5.5
    - 119.29.29.29
    # - https://dns.alidns.com/dns-query
    - https://223.5.5.5/dns-query
    - https://doh.pub/dns-query
    # AdGuard DNS
    #- 94.140.14.140
    - https://unfiltered.adguard-dns.com/dns-query
    # OpenDns
    #- 208.67.222.222
    - https://doh.opendns.com/dns-query
    # Cloudflare DNS
    #- 1.1.1.1
    - https://cloudflare-dns.com/dns-query
  direct-nameserver:
    # - system
    - 223.5.5.5
    - 119.29.29.29
    # Baidu DNS
    - 180.184.1.1
    # ByteDance DNS
    - 180.76.76.76
  proxy-server-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    # - https://dns.alidns.com/dns-query
    - https://223.5.5.5/dns-query
    - https://doh.pub/dns-query
    # AdGuard DNS
    #- 94.140.14.140
    - https://unfiltered.adguard-dns.com/dns-query
    # OpenDns
    #- 208.67.222.222
    - https://doh.opendns.com/dns-query
    # Cloudflare DNS
    #- 1.1.1.1
    - https://cloudflare-dns.com/dns-query

### åŸŸåå—…æ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  skip-domain:
    - "Mijia Cloud"
    - "+.push.apple.com"

### Tunnelé…ç½®
tun:
  enable: true
  stack: system
  device: Ethernet99
  auto-route: true
  auto-detect-interface: true
  dns-hijack:
    - any:53
    - tcp://any:53
  strict-route: true
  mtu: 1500
  # å¦‚æœæœ‰ä½¿ç”¨zerotieræˆ–è€…headscaleç­‰ï¼Œéœ€è¦è‡ªå·±é…ç½®æ’é™¤è‡ªå·±çš„ç½‘æ®µ
  # route-exclude-address: ["192.168.110.0/24"]

### è®¢é˜…åŸºç¡€é…ç½® [æ¯å¤©æ›´æ–°ä¸€æ¬¡è®¢é˜…èŠ‚ç‚¹ï¼Œæ¯ 180 ç§’ä¸€æ¬¡å¥åº·æ£€æŸ¥]
NodeParam: &NodeParam {type: http, interval: 86400, health-check: {enable: true, url: 'http://connectivitycheck.platform.hicloud.com/generate_204', interval: 180}}

# è®¢é˜…åˆé›†
proxy-providers:
  Node:
    url: ''
    <<: *NodeParam
    path: './Cord/Providers.yaml'

# èŠ‚ç‚¹ç­›é€‰
# æŒ‰åœ°åŒºç­›é€‰
FilterHKMax: &FilterHKMax '(é¦™æ¸¯|æ·±æ¸¯).*å€ç‡:2'
FilterHKMid: &FilterHKMid '(é¦™æ¸¯|æ·±æ¸¯).*å€ç‡:1'
FilterHKMin: &FilterHKMin '(é¦™æ¸¯|æ·±æ¸¯).*å€ç‡:0'
FilterHK: &FilterHK '(é¦™æ¸¯|æ·±æ¸¯).*å€ç‡'
FilterTW: &FilterTW 'å°æ¹¾.*å€ç‡'
FilterJP: &FilterJP 'æ—¥æœ¬.*å€ç‡'
FilterUS: &FilterUS 'ç¾å›½.*å€ç‡'
FilterOthers: &FilterOthers '^(?!.*(é¦™æ¸¯|æ·±æ¸¯|å°æ¹¾|æ—¥æœ¬|ç¾å›½)).*$'
FilterAll: &FilterAll '.*'

### ç­–ç•¥ç»„åŸºç¡€é…ç½®
# æ‰‹åŠ¨é€‰æ‹©
Select: &Select {type: select, url: 'http://connectivitycheck.platform.hicloud.com/generate_204', disable-udp: false, hidden: false, include-all: true}
# è‡ªåŠ¨é€‰æ‹© [æ¯ 300 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œå®¹å·® 50msï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
UrlTest: &UrlTest {type: url-test, url: 'http://connectivitycheck.platform.hicloud.com/generate_204', interval: 300, lazy: true, tolerance: 50, timeout: 2000, disable-udp: false, max-failed-times: 3, hidden: true, include-all: true}
# è‡ªåŠ¨å›é€€ [æ¯ 300 ç§’ä¸€æ¬¡æƒ°æ€§å¥åº·æ£€æŸ¥ï¼Œæ—¶å»¶è¶…è¿‡ 2 ç§’åˆ¤å®šä¸ºå¤±è´¥ï¼Œå¤±è´¥ 3 æ¬¡è‡ªåŠ¨è§¦å‘å¥åº·æ£€æŸ¥]
FallBack: &FallBack {type: fallback, url: 'http://connectivitycheck.platform.hicloud.com/generate_204', interval: 300, lazy: true, timeout: 2000, disable-udp: false, max-failed-times: 3, hidden: true, include-all: true}

# ç­–ç•¥ç»„
proxy-groups:
  - {name: ğŸ”° èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: [ğŸ‡­ğŸ‡° é¦™æ¸¯ä¸­å€, ğŸ‡­ğŸ‡° é¦™æ¸¯é«˜å€, ğŸ‡­ğŸ‡° é¦™æ¸¯ä½å€, ğŸ‡¯ğŸ‡µ æ—¥æœ¬æµ‹é€Ÿ, ğŸ‡ºğŸ‡¸ ç¾å›½æµ‹é€Ÿ, ğŸ‡¨ğŸ‡³ å°æ¹¾æµ‹é€Ÿ, ğŸ‡ºğŸ‡³ å…¶ä»–æµ‹é€Ÿ, ğŸš€ æ‰‹é€‰èŠ‚ç‚¹, DIRECT], url: http://connectivitycheck.platform.hicloud.com/generate_204}
  - {name: ğŸ“º å›½å†…åª’ä½“, type: select, proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯ä¸­å€, ğŸ‡­ğŸ‡° é¦™æ¸¯é«˜å€, ğŸ‡­ğŸ‡° é¦™æ¸¯ä½å€, ğŸ‡¨ğŸ‡³ å°æ¹¾æµ‹é€Ÿ], url: http://connectivitycheck.platform.hicloud.com/generate_204}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, type: select, proxies: [ğŸ”° èŠ‚ç‚¹é€‰æ‹©, DIRECT], url: http://connectivitycheck.platform.hicloud.com/generate_204}
  - {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT, ğŸ”° èŠ‚ç‚¹é€‰æ‹©], url: http://connectivitycheck.platform.hicloud.com/generate_204}
  - {name: ğŸŒ å…¨çƒä»£ç†, type: select, proxies: [ğŸ”° èŠ‚ç‚¹é€‰æ‹©, DIRECT], url: http://connectivitycheck.platform.hicloud.com/generate_204}
  - {name: ğŸš€ æ‰‹é€‰èŠ‚ç‚¹, <<: *Select, filter: *FilterAll}

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯ä½å€, <<: *UrlTest, filter: *FilterHKMin}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯ä¸­å€, <<: *UrlTest, filter: *FilterHKMid}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯é«˜å€, <<: *UrlTest, filter: *FilterHKMax}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯æµ‹é€Ÿ, <<: *UrlTest, filter: *FilterHK}
  - {name: ğŸ‡¨ğŸ‡³ å°æ¹¾æµ‹é€Ÿ, <<: *UrlTest, filter: *FilterTW}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬æµ‹é€Ÿ, <<: *UrlTest, filter: *FilterJP}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½æµ‹é€Ÿ, <<: *UrlTest, filter: *FilterUS}
  - {name: ğŸ‡ºğŸ‡³ å…¶ä»–æµ‹é€Ÿ, <<: *UrlTest, filter: *FilterOthers}

### è§„åˆ™é…ç½®
RuleSet_classical: &RuleSet_classical {type: http, behavior: classical, interval: 43200, format: text, proxy: ğŸ”° èŠ‚ç‚¹é€‰æ‹©}
RuleSet_domain: &RuleSet_domain {type: http, behavior: domain, interval: 43200, format: text, proxy: ğŸ”° èŠ‚ç‚¹é€‰æ‹©}
RuleSet_ipcidr: &RuleSet_ipcidr {type: http, behavior: ipcidr, interval: 43200, format: text, proxy: ğŸ”° èŠ‚ç‚¹é€‰æ‹©}

# è®¢é˜…è§„åˆ™
rule-providers:

  ExtraRejectFixDirectList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/ExtraRejectFixDirect.list
    path: ./Cord/RuleSet/ExtraRejectFixDirect.list

  ExtraRejectFixProxyList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/ExtraRejectFixProxy.list
    path: ./Cord/RuleSet/ExtraRejectFixProxy.list

  ExtraRejectList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/ExtraReject.list
    path: ./Cord/RuleSet/ExtraReject.list

  ExtraDirectList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/ExtraDirect.list
    path: ./Cord/RuleSet/ExtraDirect.list

  ExtraDirectMediaList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/ExtraDirectMedia.list
    path: ./Cord/RuleSet/ExtraDirectMedia.list

  AreaProxyHKList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/AreaProxyHK.list
    path: ./Cord/RuleSet/AreaProxyHK.list

  AreaProxyTWList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/AreaProxyTW.list
    path: ./Cord/RuleSet/AreaProxyTW.list

  AreaProxyJPList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/AreaProxyJP.list
    path: ./Cord/RuleSet/AreaProxyJP.list

  AreaProxyUSList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/AreaProxyUS.list
    path: ./Cord/RuleSet/AreaProxyUS.list

  ExtraProxyList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/ExtraProxy.list
    path: ./Cord/RuleSet/ExtraProxy.list

  ExtraProxyMediaList:
    <<: *RuleSet_classical
    url: https://raw.githubusercontent.com/JPLiu/TestFiles/refs/heads/main/Subconverter/ExtraProxyMedia.list
    path: ./Cord/RuleSet/ExtraProxyMedia.list
  
# åˆ†æµè§„åˆ™
rules:
  - GEOSITE,private,DIRECT

  - RULE-SET,ExtraRejectFixDirectList,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ExtraRejectFixProxyList,ğŸŒ å…¨çƒä»£ç†

  - RULE-SET,ExtraRejectList,REJECT
  - GEOSITE,category-ads-all,REJECT

  - RULE-SET,AreaProxyHKList,ğŸ‡­ğŸ‡° é¦™æ¸¯æµ‹é€Ÿ
  - RULE-SET,AreaProxyTWList,ğŸ‡¨ğŸ‡³ å°æ¹¾æµ‹é€Ÿ
  - RULE-SET,AreaProxyJPList,ğŸ‡¯ğŸ‡µ æ—¥æœ¬æµ‹é€Ÿ
  - RULE-SET,AreaProxyUSList,ğŸ‡ºğŸ‡¸ ç¾å›½æµ‹é€Ÿ

  - GEOSITE,abema,ğŸ‡¯ğŸ‡µ æ—¥æœ¬æµ‹é€Ÿ
  - GEOSITE,bahamut,ğŸ‡¨ğŸ‡³ å°æ¹¾æµ‹é€Ÿ
  - GEOSITE,bilibili,ğŸ“º å›½å†…åª’ä½“
  - GEOSITE,biliintl,ğŸ“º å›½å†…åª’ä½“

  - RULE-SET,ExtraDirectMediaList,ğŸ“º å›½å†…åª’ä½“
  - RULE-SET,ExtraProxyMediaList,ğŸŒ å…¨çƒä»£ç†
  - RULE-SET,ExtraProxyList,ğŸŒ å…¨çƒä»£ç†
  - RULE-SET,ExtraDirectList,ğŸ¯ å…¨çƒç›´è¿

  - GEOSITE,category-companies@cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,tracker,DIRECT
  - GEOSITE,geolocation-cn,DIRECT
  - GEOSITE,geolocation-!cn,ğŸŒ å…¨çƒä»£ç†

  - GEOIP,private,DIRECT
  - GEOIP,cloudflare,ğŸŒ å…¨çƒä»£ç†,no-resolve
  - GEOIP,cloudfront,ğŸŒ å…¨çƒä»£ç†,no-resolve
  - GEOIP,facebook,ğŸŒ å…¨çƒä»£ç†,no-resolve
  - GEOIP,fastly,ğŸŒ å…¨çƒä»£ç†,no-resolve
  - GEOIP,google,ğŸŒ å…¨çƒä»£ç†,no-resolve
#  - GEOIP,netflix,ğŸŒ å…¨çƒä»£ç†,no-resolve
  - GEOIP,telegram,ğŸŒ å…¨çƒä»£ç†,no-resolve
#  - GEOIP,tor,ğŸŒ å…¨çƒä»£ç†,no-resolve
  - GEOIP,twitter,ğŸŒ å…¨çƒä»£ç†,no-resolve
  - GEOIP,CN,DIRECT

  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼
